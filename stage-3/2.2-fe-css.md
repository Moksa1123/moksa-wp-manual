# 02.02 CSS 核心 (Flexbox, Grid, RWD 設計模式)

嗨，歡迎來到佈景主題與外掛開發的第二個核心章節。在前一堂課，我們已經建立了 CSS 的基礎觀念。今天，我們要深入探討現代網頁排版的**三大支柱**：**RWD 響應式設計**、**Flexbox** 與 **Grid**。

掌握這三項技術，是你從「會寫 CSS」邁向「能打造專業、跨裝置佈景主題」的關鍵一步。無論你是要客製化 Kadence Blocks 的樣式、為 Elementor 撰寫自訂 Widget，或是從零打造一個符合 FSE (Full Site Editing) 標準的區塊佈景主題，這些 CSS 核心觀念都是你的必備技能。

---

### 1. RWD (Responsive Web Design) 響應式網頁設計

在行動裝置流量早已超越桌面的時代，**「響應式設計」不再是一個選項，而是一個標準**。RWD 的核心目標是讓你的網站在任何尺寸的螢幕上（從手機、平板到超大桌面螢幕）都能提供最佳的瀏覽體驗。

#### 核心觀念：Mobile First (行動優先)

傳統的開發流程是先設計桌面版，再「縮小」到行動版。但現代化的工作流正好相反，我們採用 **Mobile First** 的策略。

*   **為什麼要 Mobile First？**
    1.  **簡化設計**：行動裝置的螢幕空間有限，迫使你必須專注於最重要的內容與功能。
    2.  **效能更佳**：先為行動裝置載入最基礎的樣式與資源，再透過 Media Queries 為較大螢幕「漸進增強 (Progressive Enhancement)」，載入更多內容。這對網路速度較慢的行動用戶非常友善。
    3.  **開發更有效率**：從簡單的單欄式佈局擴展到複雜的多欄式佈局，通常比反過來做更容易管理 CSS。

#### 技術核心：Media Queries (媒體查詢)

Media Queries 是 RWD 的基石。它允許我們在 CSS 中設定「條件」，當瀏覽器的視窗大小符合這些條件時，才套用特定的樣式。

一個典型的 Media Query 語法如下：

```css
/* 這是預設樣式，也就是「行動版」樣式 */
.container {
    width: 100%;
    padding: 15px;
}

/* 當螢幕寬度「大於等於 768px」時 (通常是平板)，套用以下樣式 */
@media (min-width: 768px) {
    .container {
        width: 90%;
        margin: 0 auto;
    }
}

/* 當螢幕寬度「大於等於 1024px」時 (通常是桌面)，套用以下樣式 */
@media (min-width: 1024px) {
    .container {
        width: 80%;
        max-width: 1200px;
    }
}
```

**Moksa 技巧**：在開發時，請務必打開瀏覽器的「開發者工具 (DevTools)」，並切換到「響應式設計模式 (Toggle device toolbar)」，這樣你就可以即時預覽網站在不同裝置尺寸下的呈現效果。

``

---

### 2. Flexbox - 彈性的單軸排版利器

Flexbox (彈性盒子佈局模型) 是一種**一維 (1D)** 的排版系統。它讓我們能輕鬆地在一個容器內對齊、排序、分配項目之間的空間，徹底解決了過去使用 `float` 和 `position` 進行排版的各種頭痛問題。

*   **何時使用？** 最適合用於**元件層級**的排版，例如：導覽列、卡片內的元素對齊、按鈕群組、表單欄位等。

#### 核心觀念：父層 (Container) 與 子層 (Items)

要使用 Flexbox，你只需要對**父層容器**設定 `display: flex;`，其下的**直屬子層**就會自動成為 Flex Items。

``

**主要屬性 (作用在父層 Container)：**

*   `display: flex;`：**必備**，啟動 Flexbox 模式。
*   `flex-direction:`：決定主軸的方向。
    *   `row` (預設): 水平排列。
    *   `column`: 垂直排列。
*   `justify-content:`：沿著**主軸**對齊。
    *   `flex-start`: 靠前對齊。
    *   `flex-end`: 靠後對齊。
    *   `center`: 置中對齊。
    *   `space-between`: 平均分配空間，頭尾貼齊邊緣。
    *   `space-around`: 平均分配空間，頭尾也保留間距。
*   `align-items:`：沿著**交錯軸** (與主軸垂直的軸) 對齊。
    *   `flex-start`: 靠前對齊。
    *   `flex-end`: 靠後對齊。
    *   `center`: 置中對齊。
    *   `stretch` (預設): 將項目拉伸以填滿容器。
*   `flex-wrap: wrap;`：當子項目超出容器寬度時，允許換行。

#### 實務範例：製作一個置中的導覽列

**HTML 結構:**
```html
<nav class="main-nav">
    <a href="#" class="logo">MoksaWP</a>
    <ul class="nav-menu">
        <li><a href="#">首頁</a></li>
        <li><a href="#">課程</a></li>
        <li><a href="#">關於我們</a></li>
    </ul>
    <a href="#" class="button">登入</a>
</nav>
```

**CSS 樣式:**
```css
.main-nav {
    display: flex; /* 啟動 Flexbox */
    justify-content: space-between; /* 讓 Logo, Menu, Button 之間產生最大間距 */
    align-items: center; /* 讓所有項目在垂直方向上置中對齊 */
    padding: 1rem 2rem;
    background-color: #f5f5f5;
}

.nav-menu {
    display: flex; /* Menu 內部也使用 Flexbox */
    list-style: none;
    margin: 0;
    padding: 0;
    gap: 20px; /* Moksa 技巧：用 gap 屬性可以輕鬆設定項目間距，比 margin 更方便 */
}
```

``

---

### 3. Grid - 強大的二維網格系統

如果說 Flexbox 是一維的專家，那麼 CSS Grid 就是**二維 (2D)** 的王者。它讓我們可以同時控制欄 (column) 和列 (row) 的佈局，非常適合用於**頁面層級**的整體結構排版。

*   **何時使用？** 頁面主體結構（如 header, sidebar, main, footer）、產品列表、圖片庫、複雜的儀表板介面等。

#### 核心觀念：定義網格軌道

與 Flexbox 類似，我們對**父層容器**設定 `display: grid;`，然後定義網格的結構。

**主要屬性 (作用在父層 Container)：**

*   `display: grid;`：**必備**，啟動 Grid 模式。
*   `grid-template-columns:`：定義欄的寬度與數量。
*   `grid-template-rows:`：定義列的高度與數量。
*   `gap:`：定義網格線之間的間距 (包含欄與列)。

#### 實務範例：打造經典的部落格側邊欄佈局

**HTML 結構:**
```html
<div class="site-wrapper">
    <main class="main-content">文章內容...</main>
    <aside class="sidebar">側邊欄...</aside>
</div>
```

**CSS 樣式 (Mobile First):**
```css
/* 行動版預設為單欄，堆疊顯示 */
.site-wrapper {
    padding: 20px;
}

/* 桌面版 (大於 992px) 改為兩欄式佈局 */
@media (min-width: 992px) {
    .site-wrapper {
        display: grid; /* 啟動 Grid */
        /* 
         * 定義兩欄：
         * 3fr 代表主內容佔 3 等份
         * 1fr 代表側邊欄佔 1 等份
         * fr 單位是 Grid 的精髓，它會自動計算可用空間並按比例分配
        */
        grid-template-columns: 3fr 1fr; 
        gap: 30px; /* 設定主內容與側邊欄的間距 */
    }
}
```

``

---

### 4. Flexbox vs. Grid - 我該用哪一個？

這是一個常見的問題，但答案很簡單：**兩者都用，而且經常一起用！**

*   **Grid 用於「宏觀佈局 (Macro Layout)」**：決定整個頁面的結構，例如側邊欄在哪裡，主要內容區塊佔多寬。
*   **Flexbox 用於「微觀佈局 (Micro Layout)」**：處理宏觀結構**內部**元件的對齊，例如卡片內的標題、圖片和按鈕如何排列。

**Moksa 技巧：** 最強大的模式是**在 Grid Item 內部使用 Flexbox**。例如，你的 `main-content` 是一個 Grid Item，但 `main-content` 裡面的文章卡片列表，就可以用 Flexbox 或 Grid 來排版。

---

### 5. (實作) 結合三者打造一個響應式產品列表

讓我們透過一個完整的實作，來串連今天學到的所有觀念。

**目標：** 建立一個 WooCommerce 產品卡片列表。
*   **行動版**：單欄顯示，卡片垂直堆疊。
*   **平板版**：雙欄顯示。
*   **桌面版**：三欄顯示。

#### 步驟 1: 撰寫 HTML 結構

```html
<div class="product-grid">
    <div class="product-card">
        <img src="product-image.jpg" alt="產品圖片">
        <h3 class="product-title">高品質 WordPress 主題</h3>
        <span class="product-price">$1,200</span>
        <a href="#" class="button">加入購物車</a>
    </div>
    <!-- 重複 .product-card 數次 -->
    <div class="product-card">...</div>
    <div class="product-card">...</div>
    <div class="product-card">...</div>
</div>
```

#### 步驟 2: 撰寫 CSS (Mobile First)

```css
/* 卡片內部排版 - 使用 Flexbox */
.product-card {
    display: flex;
    flex-direction: column; /* 讓卡片內元素垂直排列 */
    border: 1px solid #ddd;
    border-radius: 8px;
    padding: 1rem;
    text-align: center;
}

.product-card img {
    max-width: 100%;
    height: auto;
}

.product-card .button {
    margin-top: auto; /* Moksa 技巧：這會將按鈕推到卡片的底部，實現「對齊底部」效果 */
}

/* 列表容器排版 (行動版) - 使用 Grid 做單欄佈局 */
.product-grid {
    display: grid;
    gap: 20px; /* 設定卡片之間的間距 */
}
```

#### 步驟 3: 加上 Media Queries 實現響應式

在剛剛的 CSS 檔案底部，加上我們的斷點 (breakpoints) 樣式。

```css
/* 平板版樣式 (>= 768px) */
@media (min-width: 768px) {
    .product-grid {
        /* 改為兩欄，每欄佔據 1fr 的空間 */
        grid-template-columns: repeat(2, 1fr);
    }
}

/* 桌面版樣式 (>= 1024px) */
@media (min-width: 1024px) {
    .product-grid {
        /* 改為三欄 */
        grid-template-columns: repeat(3, 1fr);
    }
}
```
``

恭喜你！你已經成功使用現代 CSS 技術，打造了一個專業、乾淨且完全響應式的元件。這個模式可以應用在任何你需要列表排版的地方。

### 總結

今天我們學習了現代 CSS 開發的基石：
1.  **RWD**：以 **Mobile First** 為核心理念，使用 **Media Queries** 達成跨裝置的完美體驗。
2.  **Flexbox**：處理**一維**排版的利器，專精於元件內部的對齊與空間分配。
3.  **Grid**：處理**二維**排版的王者，擅長建構頁面級的宏觀佈局。

請務必親手練習這些範例，並嘗試修改其中的數值，觀察版面的變化。打開瀏覽器的開發者工具，使用其中的 Flexbox 和 Grid 檢查器，它們會是你學習排版最好的朋友。在接下來的課程中，我們將不斷地應用這些觀念來打造我們的佈景主題。
# 01.03 n8n 環境建置 (Cloud / Local Docker)

嗨，歡迎來到 n8n 與 WordPress 協作的課程！我是 Moksa 的首席課程導師。

在我們正式開始用 n8n 打造驚人的自動化流程之前，首要任務就是把我們的「自動化大腦」—— n8n 給建立起來。n8n 是一個開源的、可視覺化編輯的流程自動化工具，你可以把它想像成一個能夠串連起你所有網路服務（包含 WordPress/WooCommerce）的超級中樞。

建立 n8n 環境主要有兩種主流方式：使用官方的雲端服務 (n8n Cloud)，或是透過 Docker 在自己的電腦或伺服器上自架 (Self-Hosted)。這兩種方式各有優劣，這堂課我們會分別介紹，並提供 **Moksa 團隊的專業建議**，幫助你選擇最適合你的方案。

---

### 方法一：n8n Cloud (官方雲端服務)

這是最快、最簡單的入門方式，你不需要管理任何伺服器，只需要註冊一個帳號，就可以馬上開始使用。

**優點：**
*   **快速方便：** 幾分鐘內就能完成註冊並開始使用。
*   **免維護：** 不用擔心伺服器設定、更新、安全性等問題，n8n 官方會全部搞定。
*   **穩定可靠：** 官方維運的服務，穩定性有保障。

**缺點：**
*   **費用：** 免費方案有額度限制，當你的流程變多或執行次數增加時，就需要付費升級。
*   **資料隱私：** 雖然 n8n 的信譽良好，但所有流程資料與憑證 (Credentials) 都會儲存在 n8n 的伺服器上，對於有嚴格資料隱私要求的企業來說可能需要考量。
*   **彈性較低：** 無法安裝社群開發的自訂節點 (Custom Nodes)。

#### 實作步驟：建立 n8n Cloud 帳號

**步驟 1：前往 n8n 官方網站**

打開你的瀏覽器，前往 [n8n.io](https://n8n.io/)。點擊右上角的「Sign up for Cloud」或類似的按鈕。

``
*（截圖：n8n 官方網站首頁，並圈出註冊按鈕）*

**步驟 2：註冊帳號**

你可以選擇使用 Google、GitHub 帳號快速註冊，或是使用 Email 註冊。按照畫面上的指示填寫基本資料，完成帳號的建立。

**步驟 3：進入儀表板 (Dashboard)**

註冊並登入後，你會看到 n8n 的儀表板。這裡會顯示你目前的工作流程 (Workflows)、執行記錄 (Executions) 等資訊。

``
*（截圖：n8n Cloud 儀表板初始畫面）*

**步驟 4：開啟你的第一個 Workflow**

點擊「Workflows」頁籤，然後點擊「Add workflow」按鈕，你就會進入 n8n 的核心介面——視覺化流程編輯器。

``
*（截圖：n8n 全新的、空白的 Workflow 編輯畫面）*

恭喜你！到這裡，你的雲端 n8n 環境已經準備就緒，可以開始打造自動化流程了。

---

### 方法二：Local Docker (本機或伺服器自架)

對於開發者、技術愛好者，或是需要完全掌控資料與環境的企業來說，自架 n8n 是最佳選擇。而 Docker 是目前最推薦、最方便的自架方式。

**Moksa 技巧：** 我們強烈建議學員（特別是想深入學習的開發者）採用 **Docker 自架**的方式。這不僅能讓你完全掌控環境、不受任何限制，也更貼近未來將 n8n 部署到正式生產環境 (Production Server) 的實務情境。

**優點：**
*   **完全免費：** n8n 核心軟體是開源的，你只需要負擔伺服器或你電腦的硬體成本。
*   **資料自主：** 所有的流程、憑證、執行記錄都儲存在你自己的機器上，**隱私性最高**。
*   **無限制：** 沒有執行次數、Workflow 數量或節點的限制。
*   **高度彈性：** 可以安裝社群開發的自訂節點，擴充 n8n 的能力。

**缺點：**
*   **技術門檻：** 需要具備基礎的指令列 (Command Line) 和 Docker 知識。
*   **自行維護：** 需要自己負責 n8n 的版本更新、備份與伺服器安全。

#### 實作步驟：使用 Docker Compose 建立 n8n 環境

在開始之前，請確保你的電腦已經安裝了 **Docker** 與 **Docker Compose**。如果你還沒安裝，可以參考 Docker 官方文件進行安裝。

*   [Install Docker Engine](https://docs.docker.com/engine/install/)
*   [Install Docker Compose](https://docs.docker.com/compose/install/)

**步驟 1：建立專案資料夾與設定檔**

首先，在你的電腦上建立一個新的資料夾來存放 n8n 的設定檔，例如 `my-n8n-project`。

打開你的終端機 (Terminal) 或命令提示字元 (CMD)，進入該資料夾：

```bash
mkdir my-n8n-project
cd my-n8n-project
```

接著，我們要建立一個名為 `docker-compose.yml` 的檔案。這是 Docker Compose 的設定檔，它會告訴 Docker 如何啟動 n8n。

你可以使用 VS Code 或任何文字編輯器來建立這個檔案，並貼上以下內容：

```yaml
version: '3.7'

services:
  n8n:
    image: n8nio/n8n
    container_name: n8n_moksa
    restart: always
    ports:
      - "127.0.0.1:5678:5678"
    environment:
      - GENERIC_TIMEZONE=Asia/Taipei
    volumes:
      - ./n8n_data:/home/node/.n8n

volumes:
  n8n_data:
```

**Moksa 技巧：** 讓我們來解析一下這個設定檔的幾個**重要觀念**：
*   `image: n8nio/n8n`: 指定使用 n8n 官方的最新版 Docker 映像檔。
*   `ports: - "127.0.0.1:5678:5678"`: 將你電腦的 5678 連接埠，映射到 Docker 容器內的 5678 連接埠。`127.0.0.1` 表示只允許本機連線，更加安全。
*   `environment: - GENERIC_TIMEZONE=Asia/Taipei`: **極度重要！** 設定 n8n 容器的時區為台北時間。如果沒有設定，所有跟時間相關的觸發器 (例如排程) 都會以 UTC+0 時間執行，造成判斷錯誤。
*   `volumes: - ./n8n_data:/home/node/.n8n`: **關鍵中的關鍵！** 這是將 n8n 的資料（包含你的 Workflows 和 Credentials）儲存到你電腦的 `n8n_data` 資料夾中。這樣即使你關閉或刪除 Docker 容器，你的資料依然會被完整保留下來，這叫做「**資料持久化 (Data Persistence)**」。

**步驟 2：啟動 n8n 容器**

在 `docker-compose.yml` 檔案所在的資料夾，於終端機執行以下指令：

```bash
docker-compose up -d
```

*   `up`: 啟動服務。
*   `-d`: 代表 "detached mode"，讓 n8n 在背景執行。

Docker 會開始下載 n8n 的映像檔並啟動容器。第一次啟動會需要幾分鐘的時間。

``
*（截圖：終端機顯示 docker-compose up -d 正在下載並成功啟動 n8n 容器的畫面）*

**步驟 3：開啟 n8n 介面**

當指令執行完畢後，打開你的瀏覽器，在網址列輸入： `http://localhost:5678`

**步驟 4：設定 Owner 帳號**

第一次進入時，n8n 會請你設定一個擁有者 (Owner) 的帳號密碼。請務必牢記這組帳號密碼，這是管理你 n8n 實例的最高權限帳號。

``
*（截圖：n8n 首次啟動時設定 Owner 帳號的畫面）*

設定完成後，你就會看到與 n8n Cloud 版本完全相同的視覺化編輯介面了！

### 結論與 Moksa 建議

我們已經學會了兩種建立 n8n 環境的方法，該如何選擇呢？

| 特性 | **n8n Cloud** | **Local Docker (自架)** |
| :--- | :--- | :--- |
| **適合對象** | 快速體驗者、非技術人員、小型專案 | 開發者、技術愛好者、注重隱私的企業 |
| **設定難度** | ⭐ (非常簡單) | ⭐⭐⭐ (需要基礎 Docker 知識) |
| **維護成本** | 無 (官方處理) | 高 (需自行更新、備份) |
| **費用** | 免費方案有額度限制，進階需付費 | 軟體免費，只需硬體/伺服器成本 |
| **資料隱私** | 資料存於官方伺服器 | **資料 100% 在自己手上** |
| **客製化彈性** | 低 | **高 (可安裝自訂節點)** |

**Moksa 最終建議：**
對於這門課程，為了能不受限制地探索 n8n 的所有強大功能，並且為未來部署到正式環境做準備，我們**強烈建議所有學員都在自己的電腦上，使用「Local Docker」的方式來建置學習環境**。

在接下來的課程中，我們所有的範例也都會基於自架的 Docker 環境來進行。準備好了嗎？讓我們一起開始自動化的旅程吧！
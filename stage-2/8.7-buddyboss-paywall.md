# 08.07 (實務) 整合付費牆 (限制付費會員加入)

嗨，歡迎來到這個章節！在經營網站時，我們經常會有一些「私房內容」，例如進階教學、獨家報告、高畫質素材或是專屬的社群空間。我們不希望這些內容對所有人開放，而是只提供給付費支持我們的使用者。這個機制，就稱為「**付費牆 (Paywall)**」。

這堂課的目標，就是帶你從零到一，使用 Moksa 技術棧中推薦的 **YITH WooCommerce Membership** 外掛，來打造一個專業且自動化的付費牆系統。學員將學會如何將一個 WooCommerce 商品，轉變為一張進入你專屬內容世界的「門票」。

---

### 核心觀念：商品即門票

在開始實作前，請先建立一個**非常重要的觀念**：

*   **WooCommerce 商品**：這是使用者在你的網站上「**購買**」的東西。它可以是「VIP 會員資格一年」、「白金會員方案」等等。在本質上，它就是一個**觸發器**。
*   **YITH Membership 方案**：這是使用者購買商品後，「**獲得**」的權限。這個方案定義了會員的**有效期限**，以及他們可以**存取哪些被保護的內容**。

簡單來說，使用者「購買 A 商品」，系統就自動「賦予他 B 會員方案的權限」。整個付費牆的核心，就是設定好這兩者之間的連結。

`[截圖：一張流程圖，顯示「訪客 -> 瀏覽會員商品頁 -> 加入購物車結帳 -> 購買成功 -> 系統自動賦予會員資格 -> 會員成功瀏覽限制內容」]`

---

### 實作流程：打造你的 VIP 專屬內容區

讓我們開始動手實作吧！我們將模擬一個情境：建立一個名為「Moksa VIP 會員」的資格，購買後可以瀏覽一個「VIP 專屬文章」分類中的所有文章。

#### 步驟 1：建立「會員資格」商品

首先，我們要建立那張「門票」，也就是一個讓使用者可以購買的商品。

1.  前往 WordPress 後台，點擊左側選單的「**商品**」>「**新增商品**」。
2.  在「**商品名稱**」欄位，輸入一個清楚的名稱，例如 `Moksa VIP 年度會員`。
3.  在商品描述區，詳細說明這個會員資格包含哪些福利，吸引使用者購買。
4.  接著，往下找到「**商品資料**」區塊。
5.  **Moksa 技巧**：因為會員資格不是實體商品，不需要運送，所以請務必勾選「**虛擬**」這個選項。這會讓結帳流程中自動移除運送地址等非必要欄位，優化使用者體驗。
6.  在「**一般**」分頁中，設定「**價格**」。例如，我們設定為 `2,999` 元。
7.  設定商品圖片、簡短描述等資訊，讓商品頁面更完整。
8.  完成後，點擊右上角的「**發佈**」。

`[截圖：WooCommerce 新增商品頁面，特別圈出「商品名稱」、「虛擬」勾選框和「價格」欄位]`

現在，你的網站上已經有了一個可以被購買的「會員資格商品」了。但此時購買它，還不會發生任何事。接下來，我們要賦予它「權限」。

#### 步驟 2：建立對應的「會員方案」

現在我們要設定購買商品後，使用者會獲得的「權限方案」。

1.  前往 WordPress 後台，點擊左側選單的「**YITH**」>「**Membership**」。
2.  你會看到 Membership 的主控台，點擊上方的「**Membership Plans**」分頁，然後點擊「**Add new plan**」按鈕。
3.  在「**Plan name**」欄位，輸入一個好辨識的名稱，例如 `Moksa VIP 會員方案`。Slug (代稱) 可以讓它自動產生。
4.  **最關鍵的一步**：往下找到「**Linked products**」區塊。在「**Select products**」欄位中，開始輸入我們剛剛建立的商品名稱 `Moksa VIP 年度會員`，然後點選它。這就完成了「商品」與「方案」的連結。
5.  在「**Set membership length**」選項中，決定會員的有效期限。你可以選擇「**Unlimited**」(無限期)，或是「**Limited**」(有限期)。我們來選擇 `Limited`，並設定為 `365` 天 (days)。
6.  完成後，點擊右上角的「**發佈**」。

`[截圖：YITH Membership 新增方案頁面，特別圈出「Plan name」、「Linked products」和「Set membership length」的設定]`

恭喜你！核心的連結已經建立。現在只要有使用者購買了「Moksa VIP 年度會員」這個商品，系統就會自動將他加入「Moksa VIP 會員方案」，會籍為期 365 天。

#### 步驟 3：設定「內容限制規則」(付費牆)

門票和權限都有了，現在我們要決定哪道門需要這張門票才能進入。

1.  回到剛剛建立的「Moksa VIP 會員方案」編輯頁面。
2.  往下捲動，找到「**Permissions**」或「**Restricted Content**」區塊 (依版本可能名稱不同)。這裡就是設定付費牆的地方。
3.  點擊「**Add a new item**」來新增一條規則。
4.  你會看到很多選項，可以限制**文章、頁面、商品、分類、標籤**等等。
5.  我們的目標是保護「VIP 專屬文章」這個**文章分類**。所以，在規則類型中選擇 `Posts in Category`。
6.  在旁邊的欄位中，選擇你要保護的分類，例如 `VIP 專屬文章`。
7.  你可以繼續新增規則，例如，再新增一條規則來保護某個特定的「**頁面**」，像是「VIP 專屬影音庫」。
8.  **Moksa 技巧**：在下方「**If user is not a member**」區塊，你可以設定非會員看到受限內容時的反應。預設是顯示一段訊息，但你也可以設定將他們**重新導向 (Redirect)** 到我們的會員商品銷售頁面，這是一個非常好的行銷手法！
9.  設定完成後，記得點擊「**更新**」來儲存你的會員方案。

`[截圖：YITH Membership 方案中的「Restricted Content」區塊，顯示如何新增一條限制「文章分類」的規則]`

#### 步驟 4：完整流程測試

設定完成後，最重要的就是親自測試一遍，確保一切運作正常。

1.  **使用「無痕模式」**：打開瀏覽器的無痕視窗，模擬一個從未登入的訪客。
2.  **嘗試存取受限內容**：直接瀏覽一篇在「VIP 專屬文章」分類下的文章。你應該會看到存取被拒的提示訊息，或是被重新導向到會員銷售頁。
3.  **購買會員資格**：回到商店，找到「Moksa VIP 年度會員」商品，將它加入購物車，並使用綠界測試卡號或 LINE Pay 完成結帳流程。
4.  **驗證會員身分**：購買成功後，到「我的帳號」頁面，應該會看到多出了「Membership」的相關資訊，顯示你的會員資格與到期日。
5.  **再次存取受限內容**：在登入狀態下，重新瀏覽剛剛那篇「VIP 專屬文章」。這次，你應該可以順利看到完整的文章內容了。

如果以上步驟都順利走完，那就代表你的付費牆系統已經成功上線運作了！

### 進階技巧與整合

*   **客製化提示訊息**：在「YITH > Membership > Settings > Content Restriction」中，你可以全局修改當使用者權限不足時看到的預設訊息，讓它更符合你的品牌語氣。
*   **整合 FluentCRM**：當使用者購買會員商品後，WooCommerce 會自動為訂單加上商品名稱的標籤 (e.g., `Moksa VIP 年度會員`)。你可以設定一個 FluentCRM 自動化流程，觸發條件就是「**當使用者被加上這個標籤時**」，立即寄出一封 VIP 歡迎信，並將他們加入專屬的 VIP 電子報序列。
*   **整合 BuddyBoss / LearnDash**：YITH Membership 也可以用來限制 BuddyBoss 的社團加入權限，或是 LearnDash / LifterLMS 的課程註冊權限。這讓你可以打造付費才能加入的私密社團或線上課程，商業模式更加多元。

---

這堂課我們從觀念到實作，完整地建立了一個付費會員系統。這個功能是內容變現、知識付費的基石。請務必親手操作一遍，並試著保護不同類型的內容，你會發現它的應用潛力非常巨大。我們下個章節見！
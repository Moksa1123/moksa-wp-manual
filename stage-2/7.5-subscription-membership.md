# 7.5 (實務) 整合「會員 (Membership)」(限制特定內容)

嗨，歡迎來到 MoksaWP 的進階客製化課程！在之前的章節中，我們學會了如何建立會員方案。現在，我們要來學習會員系統最核心的功能之一：**如何限制網站上的特定內容，只讓指定的會員存取**。

這個功能是創造會員「專屬價值感」的關鍵。無論是付費文章、教學影片、軟體下載，或是會員專屬的商品折扣，都能透過今天學到的技巧來實現。這也是我們常說的「付費牆 (Paywall)」的基礎。

在這個實務章節中，我們將使用 Moksa 技術棧中的 **YITH WooCommerce Membership** 外掛，來示範幾種最常見的內容限制情境。

### 在開始之前：前置作業檢查

在進行以下操作前，請確保您已經：

1.  安裝並啟用 **YITH WooCommerce Membership** 外掛。
2.  在 `WooCommerce > 產品` 中，建立了一個或多個「會員資格」類型的**虛擬商品** (例如：VIP 會員年繳方案)。
3.  在 `YITH > Membership > Membership Plans` 中，至少建立了一個**會員方案 (Plan)**，並將其與對應的會員資格商品關聯。

如果你還沒完成以上步驟，請先回到前面的章節複習喔！

---

### 情境一：限制整篇「文章」或「頁面」的存取權

這是最常見也最直接的需求，例如：你有專為 VIP 會員撰寫的深度分析文章、產業報告，或是不對外公開的教學頁面。

**步驟 1：前往您想限制的文章或頁面編輯畫面**

從 WordPress 後台，點擊 `文章` 或 `頁面`，找到你想要設定權限的內容，點擊「編輯」。我們這邊以一篇「文章」為例。

**步驟 2：找到 YITH Membership 設定區塊**

進入文章編輯器後 (不論是傳統編輯器、區塊編輯器 Gutenberg，還是 Elementor)，請在右側的設定欄中，找到名為「**YITH Membership**」的設定面板。

``

**步驟 3：設定存取權限**

在「YITH Membership」面板中，你會看到一個選項：「**限制內容存取 (Restrict access to this content)**」。

*   **勾選**這個選項。
*   勾選後，下方會出現你所有建立的「會員方案 (Membership Plans)」列表。
*   **勾選**你希望授予存取權的會員方案。你可以同時勾選多個方案 (例如：黃金會員和白金會員都能看)。

``

**步驟 4：更新文章**

設定完成後，點擊右上角的藍色「**更新**」按鈕，就大功告成了！

現在，只有登入且擁有「VIP 會員」資格的用戶才能看到這篇文章的完整內容。非會員或不具資格的會員訪問時，只會看到你所設定的權限不足提示訊息。

> **Moksa 技巧：** 在 YITH Membership 設定區塊中，還有一個「**Alternative Content**」的欄位。你可以在這裡輸入一些「預告」或「引導文」，例如：「此為 VIP 會員專屬內容，想看完整分析嗎？立即點此升級！」。這段內容會顯示給沒有權限的訪客，是一個非常好的行銷與轉換機會點！

---

### 情境二：建立「會員專屬商品」或提供「會員價」

對於電商網站來說，給予會員購物優惠是提升續訂率的絕佳方式。YITH Membership 與 WooCommerce 完美整合，可以輕鬆實現。

#### A. 讓商品僅限特定會員購買

**步驟 1：編輯一個 WooCommerce 商品**

前往 `WooCommerce > 產品`，選擇一個你想設定為「會員專屬」的商品，點擊「編輯」。

**步驟 2：找到「會員」設定分頁**

在下方的「**商品資料 (Product data)**」區塊中，你會在左側看到一個由 YITH 外掛新增的「**Membership**」分頁，點擊它。

``

**步驟 3：設定購買權限**

在這裡，你會看到一個下拉選單「**此商品可被購買於... (This product can be purchased only by...)**」。

*   從下拉選單中選擇「**...特定方案的會員 (members with a specific plan)**」。
*   在下方出現的欄位中，**輸入並選擇**允許購買此商品的會員方案名稱。

**步驟 4：更新商品**

點擊「**更新**」按鈕。如此一來，這個商品就只有具備對應會員資格的用戶才能加入購物車並結帳。

#### B. 提供會員專屬折扣 (會員價)

如果你不想完全限制購買，而是想提供「會員價」，我們需要到 YITH 的全域設定中操作。

**步驟 1：前往 YITH Membership 設定**

從後台側邊欄前往 `YITH > Membership`。

**步驟 2：選擇「Product Restrictions」分頁**

點擊上方的「**Product Restrictions**」分頁。

**步驟 3：新增一個折扣規則**

點擊「**Add new rule**」按鈕，你會看到以下設定欄位：

*   **Membership Plan:** **選擇**要套用此折扣的會員方案。
*   **Type of restriction:** 選擇「**Discount**」。
*   **Products:** **選擇**要套用折扣的「特定商品」或「商品分類」。
*   **Discount Value:** 輸入折扣的數值 (例如：輸入 `10` 就是 10% OFF)。
*   **Discount Type:** 選擇「百分比 (%)」或「固定金額」。

``

**步驟 4：儲存設定**

設定完成後，點擊最下方的「**Save options**」按鈕。

> **Moksa 技巧：** 我們強烈建議使用「**產品分類**」來批次設定會員折扣，而非逐一設定單一商品。例如，你可以建立一個「會員專區」的產品分類，然後在這裡設定一個規則，讓所有 VIP 會員購買此分類下的所有商品都享有 9 折優惠。這樣未來新增商品時，只要將其歸類到「會員專區」，折扣就會自動生效，管理起來非常有效率。

---

### 情境三：限制頁面中的「部分內容」(進階技巧)

有時候，你不想鎖住整篇文章，而是希望文章前面一小部分是公開的「預覽」，但最精華的內容（如下載連結、影片、關鍵數據）需要會員才能看到。這時就要用到 **Shortcode (短代碼)**。

**步驟 1：找到你的會員方案 ID**

每個會員方案都有一個獨一無二的 ID。前往 `YITH > Membership > Membership Plans`。將滑鼠移到你的方案名稱上，在瀏覽器左下角顯示的連結中，你會看到 `post=XXX`，那個數字 `XXX` 就是它的 ID。

``

**步驟 2：在文章中插入 Shortcode**

回到你的文章編輯畫面，在你想要隱藏的內容前後，插入以下的 Shortcode：

```
[yith_wcmem_render_content membership_plan="你的方案ID"]

這裡是只有會員才能看到的精華內容，
例如一個重要的 PDF 下載連結，或是一段教學影片的嵌入碼。

[/yith_wcmem_render_content]
```

請務必將 `你的方案ID` 替換成你在上一步找到的數字。

**範例：**
假設我的「VIP 會員」方案 ID 是 `123`，我想寫一篇文章，前面公開，後面提供一個 VIP 專屬的報告下載連結。

```
大家好，這是本季的市場趨勢分析報告摘要...
(這段是所有人都看得到的公開內容)

---

[yith_wcmem_render_content membership_plan="123"]

感謝您成為我們的 VIP 會員！
**點此下載完整版 PDF 市場分析報告 (共 50 頁)**
[下載連結]

[/yith_wcmem_render_content]
```

``

**步驟 3：更新文章**

點擊「**更新**」。現在，所有訪客都能看到上半部的摘要，但只有 ID 為 123 的 VIP 會員才能看到被 Shortcode 包起來的下載連結。

---

### 最後一步：檢查與測試

設定完所有限制後，最重要的步驟就是**親自測試**！

1.  **使用「無痕模式」：** 打開瀏覽器的無痕視窗，模擬一般訪客，訪問你剛剛設定權限的頁面或商品，確認內容是否被正確隱藏，提示訊息是否正常顯示。
2.  **使用「測試會員帳號」：** 登入一個具有會員資格的測試帳號，再次訪問那些頁面，確認是否可以正常看到受保護的內容與會員價。

透過今天的實務操作，你已經掌握了為網站內容創造層次與價值感的核心技能。根據你的商業模式，靈活運用這些限制功能，就能打造出一個高黏著度、高轉換率的成功會員制網站！
# 05.01 WooCommerce 模板結構 (單一商品頁、商店頁)

嗨，歡迎來到 MoksaWP 網站設計與進階客製化課程！在這個章節，我們將深入探討 WooCommerce 最核心的兩個頁面：**商店頁 (Shop Page)** 與 **單一商品頁 (Single Product Page)** 的模板結構。

理解這些結構是讓你從「會用 WooCommerce」晉升到「能駕馭 WooCommerce」的關鍵一步。它能讓你擺脫佈景主題的限制，打造出完全符合品牌形象與使用者體驗的電商網站。

---

## 觀念一：WooCommerce 如何呈現頁面？

在我們動手修改之前，必須先理解 WooCommerce 是如何「畫」出這些頁面的。它主要依賴兩大核心機制：

1.  **模板檔案 (Template Files):** WooCommerce 本身就像一個小型的 WordPress，它自帶一套完整的 PHP 模板檔案，用來定義商店頁、商品頁、購物車、結帳頁等各個區塊的 HTML 結構。這些檔案都存放在外掛目錄的 `wp-content/plugins/woocommerce/templates/` 路徑底下。
2.  **掛鉤 (Hooks):** 這是 WordPress 與 WooCommerce 最強大也最重要的機制。想像一下，一個頁面是由好幾個「鉤子」串連起來的，每個鉤子上面可以掛上不同的「功能」。例如，在單一商品頁，有一個 `woocommerce_single_product_summary` 的鉤子，它上面預設掛了：商品標題、評分、價格、摘要、加入購物車按鈕...等功能。這讓我們可以在**不修改核心模板檔案**的情況下，新增、移除或重新排序這些功能。

> **Moksa 技巧：** 優先使用「掛鉤」或「頁面編輯器」來客製化，而不是直接覆寫（Override）模板檔案。這樣做的好處是，當 WooCommerce 或佈景主題更新時，你的客製化內容比較不容易因為檔案結構改變而失效，網站維護會輕鬆非常多。

---

## 實作一：解析與客製化「商店頁」

**商店頁**是所有商品的列表頁，也就是你的商品目錄。在 WooCommerce 的模板系統中，它對應到的是 `archive-product.php` 這個檔案。

`[截圖]`
*(一張典型的 WooCommerce 商店頁，包含商品網格、篩選器和排序功能)*

讓我們來看看如何使用 Moksa 技術棧中的工具來客製化它。

### 方法一：透過 Kadence 佈景主題的「自訂」功能 (推薦)

Kadence 是一款高度整合 WooCommerce 的佈景主題，它提供了非常豐富的選項，讓我們可以在圖形化介面中輕鬆調整商店頁。

*   **步驟 1：進入自訂模式**
    *   從 WordPress 後台，前往「**外觀**」>「**自訂**」。
    *   在左側的選單中，點擊「**WooCommerce**」。
    *   再點擊「**商品目錄**」。

*   **步驟 2：調整佈局與設計**
    *   你會看到許多可調整的選項，例如：
        *   **Shop Archive Layout:** 設定頁面標題的顯示方式、側邊欄 (Sidebar) 的位置或隱藏。
        *   **Archive Columns:** 設定在電腦、平板、手機上，每行要顯示幾個商品。**Moksa 技巧：** 建議手機上設定為 2 欄，視覺體驗會比 1 欄更好。
        *   **Product Image Hover Switcher:** 開啟後，滑鼠移到商品圖上會顯示第二張商品圖片。
        *   **Content Alignment:** 設定商品標題、價格的對齊方式。
        *   **Elements:** 這是最強大的部分！你可以自由拖曳、排序、開關要在商品卡片上顯示的元素，例如：**分類、評分、加入購物車按鈕、特價標籤**等等。

`[截圖]`
*(Kadence 自訂器中的「商品目錄」設定畫面，特別標示出 Elements 拖曳區塊)*

### 方法二：使用 Elementor Pro 的 Theme Builder

如果你偏好使用 Elementor Pro 來打造網站，它的 Theme Builder (主題建構器) 提供了像素級的控制權。

*   **步驟 1：建立商品存檔模板**
    *   從 WordPress 後台，前往「**Elementor**」>「**模板**」>「**Theme Builder**」。
    *   點擊「**Product Archive**」區塊的「**Add New**」按鈕。

*   **步驟 2：設計你的商店頁**
    *   進入 Elementor 編輯畫面後，你可以像編輯一般頁面一樣，拖拉 Widget 來設計。
    *   **核心 Widget:**
        *   **Archive Title:** 自動抓取「商店」這個頁面標題。
        *   **Products:** 這是最重要的 Widget，它會顯示你的商品網格。你可以在它的設定中調整欄位、分頁、排序等。
        *   你可以自由加入任何其他 Elementor Widget，例如標題、圖片、內部區塊等，來打造獨一無二的商店頁首或頁尾。

*   **步驟 3：設定顯示條件**
    *   設計完成後，點擊「**發佈 (Publish)**」。
    *   Elementor 會要求你設定「**顯示條件 (Display Conditions)**」。
    *   點擊「**ADD CONDITION**」，並確認條件是設定為「**Shop Page**」。你也可以將它套用到所有的商品分類或標籤頁。
    *   儲存後，你的 Elementor 模板就會取代佈景主題預設的商店頁。

`[截圖]`
*(Elementor 編輯器畫面，左側有 Products Widget 的設定面板，右側是即時預覽的商品網格)*

---

## 實作二：解析與客製化「單一商品頁」

**單一商品頁**是使用者決定是否購買的關鍵頁面。它對應到的核心模板是 `single-product.php`，但實際上它是由許多更小的模板組件 (如 `price.php`, `add-to-cart.php`) 和掛鉤組合而成的。

`[截圖]`
*(一張典型的 WooCommerce 單一商品頁，包含商品圖片、標題、價格、加入購物車按鈕、商品描述等)*

### 方法一：透過 Kadence 佈景主題的「自訂」功能

同樣地，Kadence 也為單一商品頁提供了強大的自訂選項。

*   **步驟 1：進入自訂模式**
    *   從 WordPress 後台，前往「**外觀**」>「**自訂**」。
    *   在左側的選單中，點擊「**WooCommerce**」。
    *   再點擊「**單一商品**」。

*   **步驟 2：調整佈局與元素**
    *   **Product Layout:** 你可以選擇不同的整體佈局，例如傳統佈局、圖片在側邊、或是全寬佈局。
    *   **Elements:** 和商店頁一樣，你可以透過拖曳來重新排序或開關頁面上的元素，例如**分類、標籤 (SKU)、麵包屑、評分、付款方式圖示**等。
    *   **Tabs Style:** 調整商品描述、額外資訊、評論這些頁籤的顯示樣式。
    *   **Related/Upsell Products:** 設定相關商品或加價購商品的顯示數量與欄位。

`[截圖]`
*(Kadence 自訂器中的「單一商品」設定畫面，特別標示出佈局選擇和 Elements 區塊)*

### 方法二：使用 Kadence Elements (Hooks) (Moksa 核心技巧)

這是最能體現 Kadence 強大之處的進階技巧。當你需要在商品頁的**特定位置**插入**特定內容**時 (例如：在「加入購物車」按鈕下方加入一個「四大保證」的圖文區塊)，Kadence Elements 是最佳解法。

*   **步驟 1：啟用 Elements**
    *   確認你有安裝並啟用 Kadence Pro (付費版)。
    *   到「**外觀**」>「**Kadence**」，啟用「**Hooked Elements**」。

*   **步驟 2：新增 Element**
    *   前往「**外觀**」>「**Kadence**」>「**Elements**」，點擊「**Add New**」並選擇「**Content Section**」。
    *   使用 Kadence Blocks 編輯器設計你想要的內容 (例如一個包含圖示和文字的區塊)。

*   **步驟 3：設定掛鉤位置與顯示條件**
    *   在右側的「**Element Settings**」中：
        *   **Placement (位置):** 選擇你要插入內容的「掛鉤」。例如，選擇 `After Single Add to Cart` 就會顯示在加入購物車按鈕下方。
        *   **Display Settings (顯示設定):** 設定這個區塊要顯示在哪裡。選擇 `Single Products` > `All Products`，它就會出現在所有商品頁。
        *   **User Settings (使用者設定):** 你甚至可以設定只有登入或未登入的會員才看得到。

`[截圖]`
*(Kadence Element 的設定畫面，高亮顯示 Placement (掛鉤選擇) 和 Display Settings (顯示條件))*

這個方法讓你幾乎可以在頁面的任何地方插入任何內容，而完全不需要碰到程式碼，這就是掛鉤的威力！

### 方法三：使用 Elementor Pro 的 Theme Builder

與商店頁一樣，Elementor Pro 也能讓你從零開始打造單一商品頁模板。

*   **步驟 1：建立單一商品模板**
    *   前往「**Elementor**」>「**模板**」>「**Theme Builder**」。
    *   點擊「**Single Product**」區塊的「**Add New**」按鈕。

*   **步驟 2：設計你的商品頁**
    *   Elementor 提供了專為商品頁設計的 Widget，你只需要拖拉並排版即可：
        *   `Product Images`：商品圖庫。
        *   `Product Title`：商品標題。
        *   `Product Price`：價格。
        *   `Add to Cart`：加入購物車按鈕 (包含數量選擇、規格選項)。
        *   `Product Content`：商品詳細描述。
        *   `Product Data Tabs`：商品資料頁籤 (描述、規格、評論)。
        *   `Related Products`：相關商品。

*   **步驟 3：設定顯示條件**
    *   設計完成後點擊「**發佈**」。
    *   設定「**顯示條件**」為「**Products**」，這樣這個模板就會套用到你所有的商品頁面。

---

## 總結

恭喜你！你已經學會了分析 WooCommerce 核心頁面模板結構的方法，並掌握了如何使用 Moksa 推薦的工具 (Kadence 與 Elementor) 進行深度客製化。

**本章節重點回顧：**

1.  WooCommerce 頁面由 **模板檔案 (Templates)** 和 **掛鉤 (Hooks)** 組成。
2.  **優先使用工具** (如佈景主題自訂、頁面編輯器、Kadence Elements) 進行客製化，而非直接修改 PHP 檔案，以利於長期維護。
3.  **商店頁 (Archive)** 和 **單一商品頁 (Single)** 都有多種客製化路徑，你可以根據專案需求與個人偏好選擇最適合的工具。
4.  善用 **Kadence Elements** 搭配 **Hooks** 是在不寫程式碼的情況下，實現高度客製化的 **Moksa 核心技巧**。

在接下來的課程中，我們將基於這些知識，去客製化更複雜的頁面，例如購物車與結帳頁。
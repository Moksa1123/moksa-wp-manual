# 08.03 (實作) 設定「會員個人資料」欄位

嗨，我是 Moksa 的首席課程導師。在經營電商網站的過程中，我們時常會需要蒐集比 WooCommerce 預設更多的會員資料。例如，你可能想知道會員的生日，以便在他們生日時自動發送一張專屬優惠券；或者，如果你的客戶包含公司行號，你可能需要他們提供「統一編號」以便開立發票。

這堂課的目標，就是教你如何利用 **Moksa 技術棧**中的核心工具 **Advanced Custom Fields (ACF)**，來彈性地新增任何你需要的會員資料欄位。這項技能將能讓你更深入地了解你的顧客，並為他們提供更個人化的服務。

---

### 為什麼需要自訂會員欄位？

在開始實作前，讓我們先思考幾個常見的商業應用情境：

*   **生日禮金/優惠券：** 蒐集會員生日，搭配 FluentCRM 自動化，在生日當天發送祝福 Email 與優惠券。
*   **B2B 交易：** 新增「公司名稱」與「統一編號」欄位，方便後續開立三聯式電子發票。
*   **客戶服務：** 新增「LINE ID」欄位，讓客服人員能更快速地透過 LINE 聯繫到客戶。
*   **個人化行銷：** 蒐集會員的偏好，例如「喜歡的產品類型」、「膚質」等，用於分眾行銷。

了解「為什麼」做，會讓你在「如何」做的時候更有方向。

### 事前準備

請確保你的網站已經安裝並啟用 **Advanced Custom Fields (ACF)** 外掛。在 Moksa 的標準建置流程中，這通常是預設安裝的必備工具之一。

---

### (實作) 新增會員資料欄位

我們將以新增「**生日**」和「**公司統一編號**」這兩個常見欄位作為範例。

#### 步驟 1：建立新的 ACF 欄位群組

首先，我們要建立一個容器，專門用來存放「會員相關」的自訂欄位。

1.  從 WordPress 後台左側選單，找到並點擊「**ACF**」。
2.  進入 ACF 頁面後，點擊上方的「**新增欄位群組 (Add New)**」。
3.  在「**新增欄位群組**」的標題處，輸入一個有意義的名稱，例如「**會員額外資訊**」。這只是給管理者看的，方便我們日後管理。

``
*ACF 新增欄位群組的介面*
``

#### 步驟 2：新增「生日」欄位

1.  在「**欄位 (Fields)**」區塊，點擊「**+ 新增欄位 (+ Add Field)**」按鈕。
2.  系統會展開一個新的欄位設定畫面，請依序填寫以下資訊：
    *   **欄位標籤 (Field Label):** 輸入「**生日**」。這是顯示給使用者看的欄位名稱。
    *   **欄位名稱 (Field Name):** 系統會自動根據標籤產生，例如 `birthday`。**Moksa 技巧：** 建議使用全英文小寫，這是給程式開發時使用的 ID，保持簡潔易懂非常重要。
    *   **欄位類型 (Field Type):** 點擊下拉選單，選擇「**日期選取器 (Date Picker)**」。這是 ACF 強大的地方，我們可以為不同資料選擇最適合的輸入格式。
    *   **說明 (Instructions):** (選填) 你可以在這裡加入提示文字，例如「我們會根據您的生日，在生日當天發送專屬優惠券給您。」
    *   **必填 (Required):** (選填) 如果你希望這個欄位是必填的，可以將此選項開啟。在此範例中，我們設定為「否」。
    *   **顯示格式 (Display Format) & 回傳格式 (Return Format):** 為了資料庫格式的統一性，**Moksa 技巧：** 我們建議將這兩項都設定為 `Y-m-d` (例如：2023-10-26)。

``
*設定「生日」欄位的詳細資訊*
``

#### 步驟 3：新增「公司統一編號」欄位

1.  再次點擊「**+ 新增欄位 (+ Add Field)**」按鈕，建立第二個欄位。
2.  依照以下資訊填寫：
    *   **欄位標籤 (Field Label):** 輸入「**公司統一編號**」。
    *   **欄位名稱 (Field Name):** 系統會自動產生 `company_tax_id`。
    *   **欄位類型 (Field Type):** 選擇「**文字 (Text)**」。
    *   **說明 (Instructions):** (選填) 可以加入提示，例如「若需開立三聯式發票，請務必填寫此欄位。」

#### 步驟 4：設定欄位群組的顯示「位置」

這是最關鍵的一步！我們要告訴 ACF，剛剛建立的「會員額外資訊」這個群組，應該要顯示在什麼地方。

1.  向下捲動到「**設定 (Settings)**」區塊中的「**位置 (Location)**」。
2.  你會看到一條預設的規則，我們要修改它。
3.  在第一個下拉選單中，選擇「**使用者角色 (User Role)**」。
4.  在第二個下拉選單中，維持「**等於 (is equal to)**」。
5.  在第三個下拉選單中，選擇「**顧客 (Customer)**」。

這條規則的意思是：「**當一個使用者的角色是『顧客』時，就在他的個人資料編輯頁面中，顯示這個欄位群組。**」

``
*設定 ACF 欄位群組的顯示位置規則*
``

#### 步驟 5：儲存設定

確認所有設定都無誤後，點擊畫面右上角的藍色按鈕「**儲存變更 (Save Changes)**」。

### 驗證成果

現在，我們來驗證一下剛剛的設定是否成功。

1.  前往 WordPress 後台的「**使用者**」>「**所有使用者**」。
2.  隨機找到一位「**角色**」為「**顧客 (Customer)**」的使用者，點擊他的使用者名稱進入編輯畫面。
3.  向下滑動頁面，你應該可以在「關於使用者」等區塊下方，看到我們剛剛建立的「**會員額外資訊**」區塊，裡面包含了「**生日**」和「**公司統一編號**」這兩個欄位！

``
*在後台使用者編輯頁面，成功看到新增的自訂欄位*
``

管理者現在已經可以在後台手動為客戶編輯這些資訊了。

### 下一步：讓會員在前台編輯資料

你可能會問：「老師，我總不能讓每個會員都打電話來，請我們從後台幫他填生日吧？」

你說的沒錯！在後台看到欄位只是第一步。要讓會員能在 WooCommerce 的「**我的帳號**」頁面自行編輯這些資料，會需要進一步的客製化。這通常會透過以下兩種 **Moksa 標準方法** 之一來達成：

1.  **使用頁面編輯器 (Elementor/Kadence Blocks) 搭配 ACF 的表單功能**：在「我的帳號」頁面中，插入一個 ACF 前台表單 (ACF Frontend Form)，並指定讓使用者編輯自己的資料。
2.  **撰寫程式碼 (Code Snippet)**：透過 PHP 程式碼，將 ACF 欄位掛載 (Hook) 到 WooCommerce 的帳號編輯表單中。

這個部分屬於更進階的課程，我們將在後續的「**WooCommerce 帳號頁面客製化**」章節中詳細教學。

恭喜你！你已經學會了使用 ACF 為你的電商網站新增重要的會員資料欄位，為接下來的個人化行銷與精準服務，打下了最重要的基礎。
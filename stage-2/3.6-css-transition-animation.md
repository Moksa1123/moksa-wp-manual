# 03.06 (實作) CSS 轉場 (Transition) 與動畫 (Animation)

大家好！我是 Moksa 的首席課程導師。在之前的課程中，我們已經學會了如何使用 CSS 來調整網站的「靜態」樣式。今天，我們要更進一步，學習如何為網站元素加入「動態」效果，讓使用者體驗 (UX) 更加流暢、精緻。

本章節我們將深入探討 CSS 的兩大動態核心：**轉場 (Transition)** 與 **動畫 (Animation)**。這兩者都能讓網站變得更生動，但它們的應用場景和原理有所不同。學會它們，你就能為按鈕、圖片、區塊等元素，創造出畫龍點睛的視覺回饋。

---

### 什麼是轉場 (Transition)？

**轉場 (Transition)** 是指當一個元素的 CSS 屬性發生**改變**時（例如：滑鼠懸停 `:hover` 造成顏色改變），這個改變的過程會以一個平滑的、漸進的方式呈現，而不是瞬間完成。

**核心觀念：** Transition 專注於 **「狀態 A」到「狀態 B」之間的平滑過渡**。它需要一個「觸發點」，最常見的就是 `:hover` (滑鼠懸停) 或 `:focus` (表單聚焦)。

Transition 主要由四個屬性組成：

1.  `transition-property`: 指定要套用轉場效果的 CSS 屬性名稱 (e.g., `background-color`, `opacity`, `transform`)。如果希望所有屬性都套用，可以使用 `all`。
2.  `transition-duration`: 轉場效果持續的時間，單位是秒 (s) 或毫秒 (ms)。例如：`0.3s`。
3.  `transition-timing-function`: 轉場過程的速度曲線，例如：`ease` (預設，慢-快-慢), `linear` (線性等速), `ease-in` (慢速開始), `ease-out` (慢速結束)。
4.  `transition-delay`: 延遲多久後才開始轉場效果。

**Moksa 技巧：** 實務上，我們很少分開寫這四個屬性，而是使用**縮寫 (shorthand)** 的方式，一次寫完，順序通常是 `property duration timing-function delay`。例如：

```css
.my-button {
  transition: all 0.3s ease-in-out;
}
```

---

### (實作) 為 Kadence 按鈕加上平滑的懸停效果

讓我們來實作一個最常見的應用：讓按鈕在滑鼠移上去時，背景顏色和文字顏色能夠平滑地改變，而不是生硬地跳變。

**步驟 1：新增一個 Kadence 按鈕區塊**

*   在你的頁面或文章中，新增一個「Kadence Blocks」的「進階按鈕 (Advanced Button)」區塊。
*   設定它的預設樣式（例如：藍底白字）。
*   在右側的區塊設定中，切換到「懸停 (Hover)」頁籤，設定滑鼠懸停時的樣式（例如：黑底黃字）。

``

**步驟 2：觀察預設的生硬效果**

*   儲存頁面後，到前台預覽。
*   當你把滑鼠移到按鈕上時，你會發現顏色是「瞬間」變化的，感覺非常生硬。這就是我們要改善的地方。

**步驟 3：使用「附加的 CSS」加入 Transition**

*   回到後台編輯頁面，點選按鈕區塊。
*   在右側設定面板的最下方，找到「進階 (Advanced)」選項，在「**附加的 CSS class**」欄位中，為這個按鈕取一個自訂的 class 名稱，例如 `smooth-hover-btn`。

``

*   接著，到 WordPress 後台，點擊左側選單的「**外觀**」>「**自訂**」。
*   在自訂器介面中，找到「**附加的 CSS (Additional CSS)**」選項並點擊進入。
*   將以下程式碼貼入：

```css
/* 為按鈕加上平滑的懸停轉場效果 */
.smooth-hover-btn .kt-button {
  transition: background-color 0.3s ease, color 0.3s ease, transform 0.2s ease;
}

/* 讓按鈕在懸停時稍微放大，增加互動感 */
.smooth-hover-btn .kt-button:hover {
  transform: scale(1.05);
}
```

**程式碼解說：**

*   `.smooth-hover-btn .kt-button`: 我們透過剛剛自訂的 class `smooth-hover-btn`，精準地選到 Kadence 按鈕的 `<a>` 標籤 (它的 class 是 `.kt-button`)。
*   `transition: background-color 0.3s ease, color 0.3s ease, transform 0.2s ease;`: 我們指定了三個屬性要進行轉場：背景色、文字顏色、以及 `transform` (變形) 屬性。它們的轉場時間和速度曲線都可以獨立設定。
*   `.smooth-hover-btn .kt-button:hover`: 當滑鼠懸停時，我們不僅改變顏色（這部分由 Kadence 設定處理），還透過 `transform: scale(1.05);` 讓按鈕稍微放大 5%，增加互動的趣味性。

**步驟 4：驗證成果**

*   點擊「**發佈**」儲存你的 CSS。
*   回到前台頁面重新整理，再次將滑鼠移到按鈕上。你會發現，現在顏色變化和放大效果都變得非常平滑、專業！

---

### 什麼是動畫 (Animation)？

相較於 Transition，**動畫 (Animation)** 更加強大且複雜。它不需要使用者觸發，可以在頁面載入後**自動、重複地播放**一系列的樣式變化。

**核心觀念：** Animation 是透過定義 **關鍵影格 (@keyframes)** 來控制元素從頭到尾的樣式變化過程。

Animation 主要由以下屬性組成：

1.  `animation-name`: 綁定一個 `@keyframes` 的名稱。
2.  `animation-duration`: 動畫播放一次所需的時間。
3.  `animation-iteration-count`: 動畫播放的次數，可以是數字，也可以是 `infinite` (無限次)。
4.  `animation-direction`: 動畫播放的方向，例如 `alternate` (來回播放)。
5.  `animation-timing-function`: 動畫的速度曲線。
6.  `animation-fill-mode`: 動畫結束後，元素要停留在哪個狀態。

**@keyframes 規則：**
這是動畫的核心，用來定義動畫過程中的各個時間點（或百分比）的 CSS 樣式。

```css
/* 定義一個名為 'pulse-effect' 的動畫 */
@keyframes pulse-effect {
  0% {
    transform: scale(1);
    opacity: 1;
  }
  50% {
    transform: scale(1.1);
    opacity: 0.7;
  }
  100% {
    transform: scale(1);
    opacity: 1;
  }
}
```

---

### (實作) 為重要的行動呼籲 (CTA) 區塊加上呼吸動畫

假設我們有一個非常重要的「立即購買」或「了解更多」的區塊，我們希望它能自動吸引使用者的目光。

**步驟 1：準備目標區塊**

*   在頁面中，你可以使用 Kadence 的「區段 (Row Layout)」或「資訊方塊 (Info Box)」來建立一個你想要凸顯的區塊。
*   同樣地，點選這個區塊，在右側設定面板的「**進階 (Advanced)**」>「**附加的 CSS class**」中，為它取一個名字，例如 `breathing-cta`。

``

**步驟 2：在「附加的 CSS」中定義 Keyframes 與 Animation**

*   再次進入「**外觀**」>「**自訂**」>「**附加的 CSS**」。
*   將以下程式碼貼入：

```css
/* 1. 定義一個名為 'breathing-animation' 的呼吸效果關鍵影格 */
@keyframes breathing-animation {
  0% {
    transform: scale(1);
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
  }
  50% {
    transform: scale(1.03);
    box-shadow: 0 8px 30px rgba(0, 0, 0, 0.2);
  }
  100% {
    transform: scale(1);
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
  }
}

/* 2. 將這個動畫應用到我們的 CTA 區塊上 */
.breathing-cta {
  animation-name: breathing-animation;     /* 綁定動畫名稱 */
  animation-duration: 2.5s;                /* 動畫持續 2.5 秒 */
  animation-timing-function: ease-in-out;  /* 速度曲線 */
  animation-iteration-count: infinite;     /* 無限次重複播放 */
}
```

**程式碼解說：**

*   `@keyframes breathing-animation`: 我們定義了一個動畫，它會在 0% 時是原始大小，50% 時放大 3% 且陰影加深，100% 時又恢復原狀。這樣就形成了一個類似呼吸的起伏效果。
*   `.breathing-cta`: 我們選中剛剛設定的區塊。
*   `animation-name`: 將我們定義的 `breathing-animation` 綁定到這個 class 上。
*   `animation-duration: 2.5s`: 讓整個呼吸循環的速度放慢，看起來更自然。
*   `animation-iteration-count: infinite`: 讓這個效果不斷重複，持續吸引使用者注意。

**步驟 3：驗證成果**

*   發佈 CSS 後，到前台重新整理頁面。
*   你不需要做任何操作，就會看到你指定的那個區塊正在進行平滑、有節奏的放大縮小，就像在呼吸一樣。

---

### 總結與 Moksa 最佳實踐

*   **Transition (轉場)**：用於**回應使用者操作**，提供流暢的狀態變更回饋。適用於按鈕懸停、選單展開、圖片放大等場景。
*   **Animation (動畫)**：用於**主動吸引使用者注意**或創造更豐富的視覺敘事。適用於載入動畫、醒目的 CTA、背景動態效果等。

**Moksa 技巧與注意事項：**

1.  **效能優先：** 不是所有 CSS 屬性都適合做動畫。**優先選擇 `transform` (移動、縮放、旋轉) 和 `opacity` (透明度)**。瀏覽器對這兩者的動畫處理效能最好，可以有效避免頁面卡頓。盡量避免對 `width`, `height`, `margin`, `padding` 等會引起頁面「重排 (reflow)」的屬性做動畫。
2.  **保持克制：** 過多的動畫會讓使用者分心，甚至感到煩躁。動畫的目的是**輔助內容、引導視覺**，而不是成為主角。確保動畫快速、有意義且不干擾閱讀。
3.  **瀏覽器前綴：** 雖然現代瀏覽器支援度已經很高，但在某些舊版瀏覽器上，可能需要加上 `-webkit-` (Chrome/Safari) 或 `-moz-` (Firefox) 等前綴，例如 `-webkit-transform: scale(1.05);`。不過在 Moksa 的技術棧中，我們通常專注於服務現代瀏覽器，可以視專案需求決定是否需要兼容。
4.  **善用工具：** 網路上有許多 CSS 動畫產生器 (CSS Animation Generator) 和緩動函數速查表 (Easing Functions Cheat Sheet)，可以幫助你快速產生複雜的動畫效果程式碼，節省開發時間。

恭喜你！現在你已經掌握了讓網站「動起來」的關鍵技能。請試著將這些技巧應用到你的網站中，為訪客創造更棒的互動體驗吧！
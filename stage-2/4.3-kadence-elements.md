# 04.03 (實作) Kadence Elements (動態模板) 介紹

哈囉，歡迎來到 Moksa 的課程！我是你的導師。

在前面的章節中，我們已經學會了如何使用 Kadence Blocks 編輯器來設計美觀的靜態頁面。然而，一個真正強大的網站，需要能夠「動態地」、「有條件地」在不同地方顯示特定內容。例如：

*   只在所有「部落格文章」的結尾，顯示一個「訂閱電子報」的區塊。
*   在購物車頁面，顯示一個「滿額免運」的提醒橫幅。
*   針對「已登入」的會員，在網站頂部顯示一個專屬的歡迎訊息。

如果沒有工具，這些需求可能需要修改佈景主題的程式碼，非常複雜且難以維護。這就是 **Kadence Elements (動態模板)** 發揮威力的地方！它是 Kadence Blocks Pro 的核心功能之一，也是我們 Moksa 團隊在建置複雜網站時不可或缺的瑞士刀。

**本章節目標：**
1.  理解 Kadence Elements 的核心運作原理：「掛鉤 (Hook)」。
2.  認識四種主要的 Element 類型及其應用場景。
3.  親手實作一個「全站公告橫幅」，並設定它的顯示條件。

---

### 核心觀念：什麼是「掛鉤」(Hook)？

在開始實作前，我們必須先理解一個 WordPress 的核心概念：「**掛鉤 (Hook)**」。

你可以把一個網頁想像成一個骨架，例如頁首 (Header)、內容區 (Content)、頁尾 (Footer) 等。而 WordPress 與 Kadence 佈景主題在這個骨架的許多「特定位置」都預先埋設了看不見的「鉤子」。

**Kadence Elements 的作用，就是讓我們可以設計一個內容區塊，然後告訴系統：「嘿！請把這個區塊『掛』到網站頭頂的那個鉤子上！」**

這樣一來，我們完全不需要去碰觸複雜的程式碼，就能精準地將內容安插到網站的任何一個角落。Kadence Elements 提供了一個視覺化的介面，讓我們可以輕鬆選擇要掛在哪一個鉤子上。

``
*（示意圖：Kadence 官方提供的 Hook 位置示意圖，可以清楚看到 `Header`, `Before Content`, `After Entry Content` 等位置。）*

---

### Kadence Elements 的四種類型

當你新增一個 Element 時，系統會請你先選擇類型。了解它們的區別非常重要：

1.  **模板 (Template):**
    *   **用途：** 這是**最常用**的類型。你可以設計任何內容區塊（例如：作者介紹、相關產品、行動呼籲 CTA），然後把它掛到網站的特定位置。
    *   **範例：** 在每篇文章結尾掛上一個「喜歡這篇文章嗎？分享給朋友吧！」的區塊。

2.  **區塊 (Section):**
    *   **用途：** 和 Template 非常相似，但它通常用於取代佈景主題的某個「完整區段」，例如取代整個頁首 (Header)、頁尾 (Footer) 或文章標題區。
    *   **範例：** 為「特價商品」分類頁面設計一個獨一無二、充滿促銷氛圍的頁首橫幅，取代預設的分類標題。

3.  **固定頁首/頁尾 (Fixed):**
    *   **用途：** 建立一個會「固定」在瀏覽器視窗頂部或底部的區塊。當使用者滾動頁面時，這個區塊會一直顯示。
    *   **範例：** 網站頂部的「限時優惠倒數計時」橫幅、底部的 Cookie 同意通知。

4.  **HTML 編輯器 (HTML Editor):**
    *   **用途：** 這個類型不是用來設計視覺區塊的，而是用來安插「程式碼片段」。
    *   **Moksa 技巧：** 這是**安插各種追蹤碼的最佳位置**！例如 **Google Analytics (GA4)**、**Meta (Facebook) Pixel** 的追蹤碼，你就可以使用這個類型，把它們掛到 `head` 或 `body` 開頭的位置，而不需要再額外安裝外掛。

---

### 實作教學：建立一個「全站公告橫幅」

接下來，讓我們透過一個最常見的需求——「全站公告橫幅」，來完整體驗一次 Kadence Elements 的強大功能。

**情境：** 我們的網站即將在下週進行維護，需要一個橫幅在網站最上方通知所有訪客。

#### 前置作業

請確保你已經安裝並啟用了 **Kadence Blocks Pro** 外掛。Elements 是 Pro 版的專屬功能。

#### 步驟 1: 新增 Element

*   從 WordPress 後台，前往左側選單的「**外觀 (Appearance)**」>「**Kadence**」。
*   在 Kadence 的功能列表中，找到「**Elements (Hooked Elements)**」並確保它是**開啟 (Enabled)** 狀態。
*   接著，在「**外觀**」底下會出現一個新的子選單「**Elements**」，點擊它。
*   點擊頁面頂部的「**Add New**」按鈕。

``
*（示意圖：後台 `外觀 > Elements` 頁面，滑鼠指標指向「Add New」按鈕。）*

#### 步驟 2: 選擇 Element 類型

系統會彈出一個視窗，讓你選擇類型。根據我們的需求，我們要建立一個固定在頂部的橫幅，所以請選擇「**固定 (Fixed)**」。

``
*（示意圖：選擇 Element 類型的彈窗，滑鼠指標選擇「Fixed」。）*

#### 步驟 3: 設計你的公告內容

接下來你會進入熟悉的區塊編輯器畫面。

*   為這個 Element 命名，例如「**網站維護公告**」。這個標題只會在後台顯示，方便你管理。
*   使用 Kadence Blocks 來設計橫幅內容。一個常見的作法是：
    1.  新增一個「**Row Layout**」區塊，設定為單欄。
    2.  設定「Row Layout」的**背景顏色**，讓它顯眼一點（例如淡黃色或淡藍色）。
    3.  在「Row Layout」中，新增一個「**Advanced Text**」區塊，輸入你的公告文字，例如：「【網站維護公告】本站將於 2023/10/26 (四) 凌晨 02:00-04:00 進行系統維護，屆時將暫停服務。」
    4.  你也可以在旁邊新增一個「**Icon**」區塊，選擇一個「關閉 (Close)」圖示。

``
*（示意圖：在區塊編輯器中完成設計的橫幅，包含背景色、文字和一個關閉圖示。）*

#### 步驟 4: 設定 Element 選項 (關鍵步驟！)

設計完成後，請點擊右上角的「**Element 設定**」圖示（在「發佈」按鈕旁，長得像一個釘子圖示）。這裡是整個功能的靈魂所在。

``
*（示意圖：右上角的 Element 設定圖示被圈選起來。）*

*   **位置 (Placement):** 在下拉選單中，選擇「**Fixed on Top**」。你也可以選擇 `Fixed on Top (No Push Down)` (不會把下方內容推開) 或 `Fixed on Bottom`。
    ``
*   **顯示設定 (Display Settings):** 這是用來決定「**這個橫幅要顯示在哪些頁面？**」。
    *   點擊「**Show On**」下拉選單，選擇「**整個網站 (Entire Site)**」。
    ``
*   **使用者設定 (User Settings):** 這是用來決定「**哪些使用者看得到？**」。
    *   因為要通知所有訪客，所以這裡我們維持預設的「**所有使用者 (All Users)**」即可。如果你想做會員專屬公告，就可以在這裡選擇 `Logged In Users`。
    ``
*   **裝置設定 (Device Settings):** 你可以決定這個橫幅只在電腦、平板或手機上顯示。預設是全部顯示，我們先不動它。
*   **到期設定 (Expire Settings):** 這是一個超棒的功能！我們可以設定這個公告自動上架與下架。
    *   勾選「**啟用過期時間 (Enable Expire)**」。
    *   設定一個未來的「**過期時間**」，例如維護結束的 `2023/10/26 04:01 AM`。時間一到，這個橫幅就會自動消失，你再也不用半夜起床關閉公告了！
    ``

#### 步驟 5: 發佈與測試

所有設定都完成後，點擊右上角的藍色「**發佈 (Publish)**」按鈕。

現在，打開你的網站前台（建議使用無痕模式），你應該就能在頁面最頂端看到剛剛設計的公告橫幅了！它會固定在那裡，無論你如何滾動頁面。

---

### 進階應用與 Moksa 技巧

學會了基礎操作後，Kadence Elements 的潛力無窮：

*   **技巧一：文章結尾的行動呼籲 (CTA):**
    *   **類型：** 模板 (Template)
    *   **位置：** `內容之後 (After Entry Content)`
    *   **顯示設定：** `顯示於 > 文章 > 所有文章`
    *   **效果：** 在每一篇部落格文章的內容結束後，自動加上一個你設計好的作者介紹或產品推薦區塊。

*   **技巧二：特定分類商品的專屬廣告:**
    *   **類型：** 模板 (Template)
    *   **位置：** `在商店循環之前 (Before Shop Loop)`
    *   **顯示設定：** `顯示於 > Product Category Archive > 選擇 "特價專區"`
    *   **效果：** 當顧客瀏覽「特價專區」這個商品分類頁時，在商品列表上方會出現一個專屬的廣告橫幅，例如「特價專區商品，任選三件再九折！」。

*   **技巧三：整合 ACF Pro (進階自訂欄位):**
    *   Kadence Elements 可以完美讀取由 ACF Pro 這類外掛建立的自訂欄位資料。你可以為產品或文章新增欄位（例如：主要成分、適用對象），然後設計一個 Element 模板來自動抓取並以你想要的樣式呈現這些資料。

### 結論

恭喜你！你已經掌握了 Kadence 中最強大的功能之一。

**Kadence Elements (動態模板)** 的核心就是「**設計內容 (Design)**」與「**設定條件 (Conditional Logic)**」的組合。它讓我們能夠以極高的效率與彈性，在網站的任何角落，針對特定的頁面、特定的使用者、在特定的時間，顯示特定的內容。

這不僅僅是為了美觀，更是實現**精準行銷**與**自動化運營**的基石。請務必花時間多多嘗試不同的「位置」和「顯示設定」組合，你會發現一片新大陸！
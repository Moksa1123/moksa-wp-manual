# 05.09 國際運費計算與報價 (FedEx/DHL 費率外掛)

大家好！歡迎來到 MoksaWP 網站營運實戰班。在上一個章節，我們已經學會了如何使用 RY Tools 處理台灣國內的超商、宅配等物流方式。然而，當你的事業版圖擴展到海外時，國際運費的計算就成了一個複雜但必須面對的挑戰。

國際運費不像國內運費那樣單純，它會根據以下幾個因素即時變動：

*   **包裹重量**
*   **包裹材積 (長x寬x高)**
*   **目的地國家/城市/郵遞區號**
*   **燃油附加費等浮動費用**

手動報價不僅耗時，也容易出錯。因此，要提供給海外顧客最精準、最專業的購物體驗，最好的方式就是**串接國際快遞公司 (例如 FedEx 或 DHL) 的 API，讓系統在結帳時自動計算即時運費**。

本章節，我們將以全球最普及的 **FedEx (聯邦快遞)** 為例，帶大家從零到有，完成 WooCommerce 官方推出的 **FedEx Shipping Plugin** 的設定，讓你的網站具備專業的跨境銷售能力。

---

### 課前準備：最重要的第一步 - 商品資料

在開始設定外掛前，有一個**絕對不能跳過**的步驟：**確認所有實體商品的「重量」與「尺寸」都已正確填寫**。

如果沒有這些基礎資料，API 就無法計算運費，就像你要寄包裹但沒告訴快遞員包裹多重多大一樣。

#### 步驟 1: 檢查並設定商品重量 (Weight)

1.  前往 WordPress 後台，點選「**商品**」並選擇任一項你要寄送海外的實體商品。
2.  在「**商品資料**」區塊中，點擊「**運送方式**」分頁。
3.  找到「**重量 (kg)**」欄位，輸入該商品的**含包裝總重量**。
    *   **Moksa 技巧：** 單位請務必統一，WooCommerce 預設使用公斤 (kg)。如果你的商品很輕，例如 100 公克，請輸入 `0.1`。

``

#### 步驟 2: 檢查並設定商品尺寸 (Dimensions)

1.  在同一個「**運送方式**」分頁中，找到下方的「**尺寸 (cm)**」欄位。
2.  依序輸入商品的**長度、寬度、高度**。
    *   **Moksa 技巧：** 這裡的尺寸指的是**商品本身**的尺寸，而非最終出貨紙箱的尺寸。外掛會在後續設定中，透過「裝箱演算法」來決定要用哪個紙箱，所以這裡請填寫商品本體的尺寸即可。

``

**請務必對你的每一項實體商品，都重複以上的檢查與設定。**

---

### (實作) 安裝與設定 FedEx 官方費率外掛

現在，讓我們開始安裝由 WooCommerce 官方開發的付費外掛：[FedEx Shipping Plugin](https://woocommerce.com/products/fedex-shipping-plugin/)。這類官方外掛雖然需要付費，但能確保最高的相容性與最即時的費率更新。

#### 步驟 1: 取得 FedEx API 金鑰 (API Credentials)

為了讓你的網站能和 FedEx 系統溝通，你需要一組專屬的 API 金鑰。

1.  前往 [FedEx Developer Portal](https://developer.fedex.com/)。
2.  註冊一個開發者帳號 (如果沒有的話)。
3.  登入後，按照 FedEx 的指引，建立一個新的專案 (Project) 並取得你的 **API Key**, **Secret Key**, 以及 **Production Credentials**。
    *   **重要觀念：** API 通常會提供「測試環境 (Sandbox/Test)」與「正式環境 (Production)」兩組金鑰。在網站正式上線前，你可以用測試金鑰來玩玩看，但**要對外營運時，請務必換成正式金鑰**。
4.  你也需要你的 **FedEx 帳號 (Account Number)**。

``

**Moksa 技巧：** 申請 API 的過程通常是整個串接中最繁瑣的部分，需要耐心閱讀 FedEx 的文件。如果遇到困難，可以直接聯繫 FedEx 的客服，告知他們你正在設定 WooCommerce 外掛，需要 API 存取權限。

#### 步驟 2: 安裝外掛並輸入 API 金鑰

1.  在你的 WordPress 後台，前往「**外掛**」>「**安裝外掛**」，上傳你購買的 FedEx 外掛 ZIP 檔並啟用。
2.  前往「**WooCommerce**」>「**設定**」>「**運送方式**」分頁。
3.  點擊上方的「**FedEx**」子分頁。
4.  將你從 FedEx Developer Portal 取得的 **API Key**, **Secret Key**, 和你的 **FedEx Account Number** 等資訊，仔細地填入對應的欄位。
5.  **商店地址 (Origin Address)** 欄位請務必填寫你實際的出貨地址，這是計算運費的起點。
6.  完成後點擊「**儲存設定**」。

``

#### 步驟 3: 新增 FedEx 到你的「運送區域」

光是輸入金鑰還不夠，你還需要告訴系統，哪些區域的訂單要啟用 FedEx 運費計算。

1.  回到「**WooCommerce**」>「**設定**」>「**運送方式**」>「**運送區域**」。
2.  你可以建立一個新的區域，例如命名為「美國與加拿大」，並在「**區域範圍**」中選擇「美國」和「加拿大」。或者，你也可以直接編輯一個涵蓋所有海外國家的「其餘地區」區域。
3.  在該區域的「**運送方式**」區塊，點擊「**新增運送方式**」。
4.  從下拉選單中選擇「**FedEx**」後，點擊「**新增運送方式**」。

``

#### 步驟 4: 設定 FedEx 費率與打包方式

這是最後，也是最關鍵的設定。

1.  將滑鼠移到你剛剛新增的「FedEx」上，點擊「**編輯**」。
2.  你會看到 FedEx 的詳細設定畫面。
    *   **Method Title (運送方式標題):** 可以維持預設的 `FedEx`，或改成更友善的名稱，如「FedEx 國際快遞」。
    *   **Rates and Services (費率與服務):**
        *   **Rates:** **務必選擇 `Use live shipping rates` (使用即時運費)**。
        *   **Services:** 點擊「Services」按鈕，你可以勾選要提供給顧客的服務選項，例如「FedEx International Priority® (國際優先快遞)」或「FedEx International Economy® (國際經濟快遞)」。你還可以自訂每個服務的顯示名稱，甚至微調費用 (例如加上固定手續費)。
        *   **Moksa 技巧：** 不要提供太多選項，建議只開啟 2-3 個最常用的服務，一個求快 (Priority)、一個求經濟 (Economy)，避免客戶在結帳時感到困惑。
    *   **Parcel Packing (包裹打包):**
        *   這是決定運費精準度的核心。
        *   **`Pack items individually` (個別打包):** 最不推薦的選項。它會把購物車裡每個商品都當成一個獨立包裹計算運費，通常會導致運費高得嚇人。
        *   **`Pack into boxes with weights and dimensions` (依重量與尺寸裝箱):** **這是最專業且最推薦的選項**。選擇此項後，你需要把你公司常用的出貨紙箱尺寸 (長寬高與最大重量) 建立成清單。結帳時，系統會自動執行「裝箱演算法」，模擬如何將顧客購買的商品組合放進最適合的箱子裡，然後再向 FedEx 取得最精準的報價。

``

設定完成後，點擊「**儲存設定**」。

---

### 前台測試與驗證

所有設定都完成後，一定要親自測試！

1.  用瀏覽器的「無痕模式」開啟你的網站。
2.  將一或多個有設定重量與尺寸的商品加入購物車。
3.  前往結帳頁面。
4.  在「**國家/地區**」欄位選擇一個你設定的海外國家 (例如：美國)。
5.  輸入有效的城市、州和郵遞區號。
6.  此時，你應該會看到運送方式區塊出現了你剛剛設定的 FedEx 選項，並且後面帶有 API 即時計算出來的運費金額。

``

如果沒有出現，或是出現錯誤訊息，請回頭檢查：
*   API 金鑰是否正確？
*   商品重量尺寸是否填寫？
*   運送區域的國家設定是否正確？
*   出貨地地址是否完整？

### 關於 DHL 與其他快遞

如果你偏好使用 DHL，市面上同樣有由 WooCommerce 官方開發的 [DHL Express Shipping Plugin](https://woocommerce.com/products/dhl-express-woocommerce-shipping-plugin/)。它的設定邏輯與本章節教的 FedEx 外掛**完全相同**：

1.  向 DHL 申請 API 金鑰。
2.  安裝外掛並輸入金鑰。
3.  將 DHL 新增到運送區域。
4.  設定要提供的服務與打包方式。
5.  進行測試。

學會了設定其中一家，要再設定另一家就非常容易了。

---

### **重要觀念：關稅 (Customs Duties) 與稅金 (Taxes)**

最後，一個非常重要的觀念要提醒大家：

**FedEx 或 DHL 的費率外掛，只會計算「運費」。它「不包含」包裹抵達目的國後，當地海關可能會收取的「進口關稅」或「消費稅」。**

這是所有跨境電商賣家都會遇到的問題。最好的處理方式，就是在網站上清楚告知顧客。

**Moksa 技巧：**
*   **在結帳頁面或網站頁尾的「運送政策」頁面中，明確加註一段聲明**，例如：
    > 「所有國際訂單的價格均不包含目的地的關稅與稅金。收件人需自行負責支付當地海關要求的任何進口相關費用。相關規定請洽詢您所在地的海關。」
*   這在國際貿易術語中稱為 **DDU (Delivered Duty Unpaid)**，也就是「未完稅交貨」，是目前 B2C 跨境電商最普遍的做法。

---

### 總結

恭喜你！完成這個章節後，你的 WooCommerce 網站已經從一個只能做國內生意的網店，升級為具備全球銷售能力的專業跨境電商平台。透過 API 自動計算運費，不僅能節省你的人力，更能提供海外顧客清晰、無爭議的購物體驗，大幅提升專業形象與顧客信任度。記得，**商品資料的完整性**是這一切的基礎，務必從源頭就把資料建立正確！
# 12.06 (實務) 設定「自訂事件」與「轉換」

嗨，歡迎來到網站營運實戰班！在上一個章節，我們討論了數據分析的重要性。這個章節，我們將進入實作，教你如何設定網站上最重要的數據：「事件 (Event)」與「轉換 (Conversion)」。

學會這項技能，你才能真正衡量行銷活動的成效 (ROI)，了解顧客的行為路徑，並做出數據驅動的商業決策。這也是區分電商新手與專業營運者的關鍵分水嶺。

---

### 課前準備：你需要什麼？

在開始之前，請確保你已經準備好以下帳號與資訊。這堂課的重點在於「串接」，而不是申請帳號的流程。

1.  **Google Analytics 4 (GA4) 帳號：**
    *   你需要你的「**評估 ID (Measurement ID)**」，格式為 `G-XXXXXXXXXX`。
2.  **Google Tag Manager (GTM) 帳號：**
    *   你需要你的「**容器 ID (Container ID)**」，格式為 `GTM-XXXXXXX`。
    *   **Moksa 技巧：** 為什麼我們不用外掛直接串接 GA4，而是要透過 GTM？因為 GTM 就像一個「代碼管理中心」，未來你要安裝 Meta Pixel、Google Ads 追蹤碼、LINE LAP 追蹤碼、Hotjar 等任何行銷工具的程式碼時，你只需要在 GTM 裡操作，而**不需要再請工程師或自己去動網站的程式碼**。這不僅更安全、管理更方便，也能稍微提升網站效能。
3.  **Meta (Facebook) 企業管理平台帳號：**
    *   你需要你的「**Pixel 像素 ID**」，通常是一串數字，例如 `1234567890123456`。

---

### 核心觀念：事件、轉換與 GTM

在我們動手設定之前，先快速建立三個核心觀念：

*   **事件 (Event):** 使用者在網站上的任何「行為」，都可以是一個事件。例如：`page_view` (瀏覽頁面)、`add_to_cart` (加入購物車)、`begin_checkout` (開始結帳)、`purchase` (完成購買)。
*   **轉換 (Conversion):** 一個對你的生意「**有價值**」的事件。對電商網站來說，最重要的轉換就是 `purchase`。你也可以將「註冊會員」或「填寫聯絡表單」設定為轉換。
*   **GTM 的角色:** GTM 就像一個信差。我們的 WooCommerce 網站透過外掛，將使用者行為 (例如有人下單了) 通知 GTM。GTM 收到通知後，再分別把這個好消息告訴 Google Analytics、Meta Pixel 等不同的行銷平台。

`[截圖]`
*示意圖：網站 -> GTM -> (分送到) GA4, Meta Pixel, Google Ads*

---

### 步驟 1：安裝並設定 GTM4WP 外掛

首先，我們要讓 WordPress 網站能夠和 GTM 溝通。Moksa 團隊推薦使用 `Google Tag Manager for WordPress (GTM4WP)` 這支外掛，它功能強大且與 WooCommerce 整合得非常好。

1.  登入 WordPress 後台，前往「外掛」>「安裝外掛」。
2.  搜尋「**GTM4WP**」，找到作者為 `Thomas Geiger` 的外掛，點擊「立即安裝」並「啟用」。
    `[截圖]`
3.  啟用後，從左側選單進入「設定」>「Google Tag Manager」。
4.  在「一般」分頁中，找到「**Google Tag Manager ID**」欄位。
5.  將你準備好的 GTM 容器 ID (格式 `GTM-XXXXXXX`) 貼上。
    `[截圖]`
6.  **容器程式碼位置**，選擇「**頁尾 (Footer)**」。這是比較推薦的非同步載入方式，對網站速度影響較小。
7.  點擊「儲存設定」。
8.  接著，切換到「整合」>「WooCommerce」分頁。
9.  **務必勾選**「**追蹤標準電子商務 (Track classic enhanced ecommerce)**」。
    `[截圖]`
10. **Moksa 技巧：** GTM4WP 最強大的地方就在這裡！勾選這個選項後，外掛會自動幫我們把所有 WooCommerce 的標準電商事件 (如 `view_item`, `add_to_cart`, `purchase`) 都準備好，並傳送到 GTM。我們後續的設定會因此變得非常簡單。
11. 再次點擊「儲存設定」。

到這裡，你的 WordPress 網站已經和 GTM 建立起了初步的連結。

---

### 步驟 2：在 GTM 中設定 GA4 追蹤

現在，我們要進入 GTM 的後台，設定「信差」的工作，告訴它收到網站訊息後，要轉發給 GA4。

1.  登入你的 [Google Tag Manager](https://tagmanager.google.com/) 帳戶，進入你的容器。
2.  **建立 GA4 設定代碼 (基礎安裝):**
    *   點擊左側的「代碼 (Tags)」，然後點擊右上角的「新增 (New)」。
    *   為代碼命名，例如「**GA4 - Pageview - 全站**」。
    *   點擊「代碼設定」，選擇「**Google Analytics (分析)**」 > 「**Google 代碼 (Google Tag)**」。
    *   在「**代碼 ID (Tag ID)**」欄位中，貼上你準備好的 GA4 評估 ID (`G-XXXXXXXXXX`)。
    *   `[截圖]`
    *   接著點擊下方的「觸發條件 (Triggering)」。
    *   選擇「**All Pages**」，這代表這個 GA4 的基礎代碼會在網站的每一個頁面都被載入。
    *   點擊右上角的「儲存」。

3.  **建立 Purchase 轉換事件代碼:**
    *   再次點擊「新增」來建立一個新的代碼。
    *   為代碼命名，例如「**GA4 - Event - Purchase**」。
    *   點擊「代碼設定」，選擇「**Google Analytics (分析)**」 > 「**GA4 事件 (GA4 Event)**」。
    *   在「**評估 ID**」欄位，再次貼上你的 GA4 評估 ID。**Moksa 技巧：** 更進階的作法是將評估 ID 設為「變數」，但初期手動貼上即可。
    *   在「**事件名稱**」欄位，**精準地**輸入 `purchase`。這個名稱必須跟 GTM4WP 外掛送出的事件名稱完全一樣。
    *   `[截圖]`
    *   點擊下方的「觸發條件」。
    *   點擊右上角的「+」新增觸發條件。
    *   為觸發條件命名，例如「**CE - Purchase**」(CE 代表 Custom Event 自訂事件)。
    *   點擊「觸發條件設定」，選擇「**自訂事件 (Custom Event)**」。
    *   在「**事件名稱**」欄位，**再次精準地**輸入 `purchase`。
    *   `[截圖]`
    *   儲存觸發條件，然後儲存整個代碼。

4.  **發布你的 GTM 容器：**
    *   在 GTM 的右上角，點擊藍色的「**提交 (Submit)**」按鈕。
    *   為這個版本取一個名字，例如「安裝 GA4 與 Purchase 事件」。
    *   點擊「**發布 (Publish)**」。**非常重要**，如果沒有發布，所有設定都不會生效！

---

### 步驟 3：在 GTM 中設定 Meta Pixel 追蹤

設定 Meta Pixel 的流程與 GA4 非常相似，這能讓你更熟悉 GTM 的操作邏輯。

1.  **建立 Meta Pixel 基礎代碼 (Page View):**
    *   在 GTM 中，再次點擊「代碼」>「新增」。
    *   為代碼命名，例如「**Meta - PageView - 全站**」。
    *   點擊「代碼設定」，在右側搜尋「**Meta Pixel**」，你會在「社群提供的範本」中找到它，點擊新增。
    *   在「**Meta Pixel ID**」欄位，貼上你準備好的 Pixel ID。
    *   `[截圖]`
    *   觸發條件一樣選擇「**All Pages**」。
    *   儲存代碼。

2.  **建立 Meta Purchase 事件代碼:**
    *   再次「新增」代碼，命名為「**Meta - Event - Purchase**」。
    *   代碼設定一樣選擇「**Meta Pixel**」。
    *   貼上你的「**Meta Pixel ID**」。
    *   在「**Standard Event Name**」欄位，從下拉選單中選擇「**Purchase**」。
    *   `[截圖]`
    *   點擊「觸發條件」，選擇我們剛剛為 GA4 建立好的「**CE - Purchase**」這個觸發條件。**Moksa 技巧：** 這就是 GTM 的優勢！同一個使用者行為 (購買)，可以用同一個觸發條件，同時發送給 GA4 和 Meta Pixel，不需要重複設定。
    *   儲存代碼。

3.  **再次發布 GTM 容器：**
    *   重複上述步驟，點擊「提交」>「發布」，讓 Meta Pixel 的設定也正式上線。

---

### 步驟 4：驗證與除錯

設定完成後，最重要的就是驗證。你必須確認所有追蹤碼都正確地被觸發了。

1.  **使用 GTM 預覽模式：**
    *   在 GTM 右上角，點擊「**預覽 (Preview)**」。
    *   輸入你的網站網址，點擊「Connect」。
    *   GTM 會在新分頁中打開你的網站，右下角會顯示「Tag Assistant Connected」。
    *   回到 GTM 預覽模式的分頁，你應該會看到「Tags Fired」區塊中，有我們剛剛設定的「GA4 - Pageview」和「Meta - PageView」代碼。
    *   `[截圖]`
2.  **進行一筆測試訂單：**
    *   在你的網站上，實際走一次購物流程，使用測試金流 (例如綠界的測試信用卡號) 下一筆訂單，直到看見「謝謝您，訂單已收到」的感謝頁面。
3.  **檢查 Purchase 事件：**
    *   回到 GTM 預覽模式分頁，你會在左邊的事件串流中，看到一個名為 `purchase` 的事件被觸發。
    *   點擊這個 `purchase` 事件，然後查看右邊的「Tags Fired」區塊。你應該要能看到「**GA4 - Event - Purchase**」和「**Meta - Event - Purchase**」這兩個代碼。如果它們出現在這裡，代表設定大功告成！
    *   `[截圖]`
4.  **檢查 GA4 和 Meta 後台：**
    *   **GA4:** 前往 GA4 後台的「管理」>「資源」區塊 >「**DebugView**」。在這裡，你應該能即時看到從你的測試瀏覽器送出的 `purchase` 事件。
    *   **Meta:** 前往 Meta 的「事件管理工具」，選擇你的 Pixel，在「測試事件」頁籤中，你也能看到 `Purchase` 事件的紀錄。

恭喜你！你已經完成了電商網站最核心的轉換追蹤設定。現在，你下的每一筆廣告、做的每一次行銷活動，都能在後台清楚地看到它們是否真的帶來了「訂單」這個最有價值的轉換。在接下來的課程中，我們將會利用這些數據，進行更進階的行銷自動化設定。
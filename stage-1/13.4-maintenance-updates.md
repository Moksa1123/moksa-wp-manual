# 13.04 (維護) 網站日常維護 (核心、外掛、佈景主題更新)

大家好，我是 Moksa 的首席課程導師。

歡迎來到網站營運的維護章節。許多新手站長在網站上線後，最常忽略、甚至感到害怕的就是「更新」。看到後台右上角那個紅色的更新數字不斷增加，心中不免感到焦慮。

這堂課就是要為你建立一套**安全、標準化**的更新流程。網站更新就像是為你的愛車做定期保養，雖然有點繁瑣，卻是確保它能跑得又快又穩、並且不會被駭客輕易入侵的**必要工作**。遵循 Moksa 的 SOP，你就能自信且安全地完成這項重要的例行維護。

---

## 為什麼「更新」如此重要？

在我們進入實作流程前，你必須先理解為什麼我們要不厭其煩地強調「更新」的重要性。主要有三大原因：

1.  **安全性 (Security):** 這是**最重要**的原因。WordPress 作為全球市佔率最高的 CMS 系統，自然也成為駭客的首要目標。軟體開發者一旦發現漏洞，就會立即發布「安全性更新」來修補。如果你不更新，就等於是把網站的後門大開，讓駭客有機可乘。
2.  **新功能與相容性 (Features & Compatibility):** 更新通常會帶來新的功能、更好的使用者體驗，以及對新版 PHP 或其他系統環境的相容性。例如，WooCommerce 的更新可能會帶來更方便的訂單管理介面。
3.  **效能與錯誤修復 (Performance & Bug Fixes):** 開發者會持續優化程式碼，讓外掛或佈景主題運作得更有效率，並修復已知的 Bug。更新能確保你的網站享有最佳效能，並減少遇到問題的機率。

---

## Moksa 標準更新作業流程 (SOP)

請記住一個**黃金定律**：**永遠不要在沒有備份的情況下，直接在正式營運的網站上點擊「立即更新」**。這是一個極具風險的行為，可能會導致網站白畫面、功能異常，甚至資料遺失。

以下是我們推薦的標準作業流程，請務必養成習慣。

### 步驟 1：進行完整網站備份

這是整個流程的「保險」，如果更新後發生任何災難，你都能從容地將網站恢復到更新前的狀態。

1.  登入你的 WordPress 後台。
2.  在左側選單，找到「設定」>「**UpdraftPlus Backups**」。
3.  進入 UpdraftPlus 儀表板後，點擊藍色的「**立即備份 (Backup Now)**」大按鈕。
    ``
4.  系統會跳出一個視窗，確認你要備份的項目。請確保「**將您的資料庫加入備份 (Include your database in the backup)**」和「**將您的檔案加入備份 (Include your files in the backup)**」這兩個選項都有勾選。
5.  點擊「**立即備份 (Backup Now)**」。備份過程會需要幾分鐘，時間長短取決於你網站的大小。
6.  備份完成後，你可以在下方的「**存在的備份 (Existing backups)**」區域看到剛剛完成的備份檔案。**Moksa 技巧：** 為了雙重保險，建議點擊「資料庫」、「外掛」、「佈景主題」、「上傳項目」等按鈕，將備份檔案下載一份到你自己的電腦中保存。
    ``

### 步驟 2：檢查更新日誌 (Changelog)

在按下更新前，先花點時間了解這次更新了什麼。這是一個專業網站管理者必備的習慣。

1.  在後台左側選單，點擊「儀表板」>「**更新**」。
2.  你會看到所有待更新的核心、外掛與佈景主題列表。
3.  在每個項目的下方，通常會有一個「**檢視 [版本號] 詳細資訊**」的連結。
    ``
4.  點擊它，仔細閱讀更新日誌。特別注意是否有標示為「**安全性修補 (Security Fix)**」或提到「**重大變更 (Major Change)**」的內容。如果是重大的版本更新 (例如從 5.x 版更新到 6.0 版)，就需要更謹慎地測試。

### 步驟 3：(強烈建議) 在「預備站」(Staging Site) 進行測試

對於正在營運的電商網站，我們強烈建議先在一個「複製品網站」(稱為 Staging Site 或測試站) 上進行更新測試。許多優質的主機商 (如 Cloudways) 都有一鍵建立預備站的功能。

如果在預備站更新後，網站的一切功能（例如：商品頁、購物車、結帳流程）都正常，你才能放心地在正式站執行更新。

*   *本章節的重點在於日常維護，關於預備站的詳細操作，請參考我們更進階的課程。*

### 步驟 4：在正式站執行更新

當你已經完成備份，並且心中有數後，就可以開始更新了。我們的建議更新順序是：**外掛 → 佈景主題 → WordPress 核心**。

1.  **更新外掛 (Plugins):**
    *   在「更新」頁面，勾選你想要更新的**外掛**。
    *   **Moksa 技巧：** 不要一次更新全部的外掛。建議分批進行，一次更新 3-5 個。特別是像 **WooCommerce**、**Elementor** 或 **Kadence Blocks** 這種大型外掛，建議單獨更新。
    *   每更新完一批，就到網站前台瀏覽幾個重要頁面（首頁、商品頁、購物車），確保沒有版面錯亂或功能異常。

2.  **更新佈景主題 (Themes):**
    *   外掛都更新完畢且檢查正常後，接著更新你的佈景主題。
    *   勾選要更新的佈景主題，點擊「**更新佈景主題**」。

3.  **更新 WordPress 核心 (Core):**
    *   這是最後一步。通常 WordPress 核心的更新都相當穩定。
    *   在頁面最上方，點擊「**立即更新**」按鈕來更新 WordPress 核心。
    *   更新完成後，WordPress 可能會引導你到一個介紹新功能的頁面。

### 步驟 5：更新後最終檢查

更新全部完成後，還不算大功告成。請務必執行最後的檢查：

1.  **清除網站快取：**
    *   這是**非常重要**的一步。舊的快取檔案可能會與更新後的程式碼產生衝突。
    *   到上方工具列找到 **WP Rocket** 的選項，點擊「**清除快取 (Clear cache)**」。
    *   ``

2.  **全面功能測試：**
    *   **前台瀏覽：** 再次仔細瀏覽網站的重要頁面，確保視覺呈現都正常。
    *   **核心流程測試 (針對電商網站)：**
        *   將商品加入購物車。
        *   前往結帳頁面。
        *   測試金流是否能正常跳轉 (可以刷一筆 1 元的訂單測試)。
        *   測試聯絡表單是否能正常寄信。
    *   **後台檢查：** 在後台各個頁面點擊操作，看看是否有任何 JavaScript 錯誤或 PHP 錯誤訊息跳出。

---

## 如果更新後網站壞了怎麼辦？

別慌張！這就是我們第一步要做備份的原因。

1.  **判斷問題來源：** 如果你是分批更新，就很容易判斷是哪個外掛造成的問題。
2.  **還原備份：** 如果問題很嚴重，導致網站無法正常運作，最快的方法就是使用 **UpdraftPlus** 還原到更新前的備份。登入 UpdraftPlus 儀表板，找到你剛剛的備份記錄，點擊「**還原 (Restore)**」按鈕，並依照指示操作即可。
3.  **尋求協助：** 你可以到該外掛的支援論壇尋求協助，或是聯繫 Moksa 的進階支援服務。

## 關於自動更新

WordPress 本身有提供自動更新的機制。你可以在「儀表板」>「更新」頁面看到相關設定。

*   **Moksa 建議：**
    *   **WordPress 核心：** 可以設定「**自動安裝維護與安全性發行版本**」。這通常是小版本更新，風險較低。
    *   **外掛與佈景主題：** **強烈建議「不要」啟用自動更新**。因為外掛與佈景主題之間的衝突是網站出錯最常見的原因。我們必須透過手動、分批的更新流程來控制風險。

恭喜你！學會了這套專業的網站更新 SOP。從今天起，請至少**每週**安排一次時間，按照這個流程檢查並更新你的網站。規律的維護，是網站長治久安的基石。